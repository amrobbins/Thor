

Sanity check nvidia driver and cuda

nvidia-smi

nvcc --version

Ensure both work and that you have cuda 13 installed.

sudo apt update
sudo apt-get -y install cudnn9-cuda-13

sudo apt install -y \
    build-essential \
    cmake \
    ninja-build \
    git \
    pkg-config \
    libomp-dev \
    ccache \
    clang-format

sudo apt install -y python3 python3-venv python3-dev python3-pip python-is-python3

sudo apt install -y libncurses-dev graphicsmagick libgraphicsmagick++1-dev nlohmann-json3-dev libboost-all-dev

cd ~
git clone git@github.com:amrobbins/Thor.git
cd ~/Thor
python3 -m venv .venv
python -m pip install --upgrade pip
python -m pip install nanobind yapf

mkdir build
cmake .. -G Ninja -DCMAKE_BUILD_TYPE=Debug
cmake --build .
./thor_tests

When setting up IDE, clion recommended, point it to the python interpretter at <repo root>/.venv/.
Go to  settings → editor → general → on save and check
    1. remove trailing blank lines
    2. ensure every file ends in newline

Settings → Editor → Code Style → C/C++
Check use clang-format
Settings → Tools → Actions on Save
Check reformat code. Choose C++, and cmake
Settings → Plugins → Marketplace
Install File Watchers

Settings → Tools → File Watchers → + → Custom
Name: YAPF
File type: Python
Scope: Project Files
Program: path to yapf i.e. <content root>/.venv/bin/yapf
Arguments:
--in-place $FilePath$
Working directory: $ProjectFileDir$
Output paths to refresh: $FilePath$
Make sure “Trigger the watcher on save” (or “On Save”) is checked.
